MODE D'EMPLOI
=============

Prérequis
---------

Système supporté Ubuntu 12.04.4 LTS

Le fichier à utiliser doit exister sur le serveur dewpoint
Pour le créer:
# truncate /mnt/fuse/0/myfile --size 50M

Installation du driver
----------------------

# insmod dewb

Ajout d'un nouveau device
-------------------------

Il suffit ensuite de créer un block driver pointant dessus comme suit:
# echo "http://<ip>[:port]/<path_and_filename>" > /sys/class/dewb/add

Une entreée dans /dev est créé:
* /dev/dewba pour le 1er ajout
* /dev/dewbb pour le 2e
Et ainsi de suite ...

Suppression d'un device
-----------------------

Un device créé à l'étape précédente peut être supprimé par la commande
suivante: 
# echo "device" > /sys/class/dewb/remove
device peut être par exemple dewba, dewbb, dewbc ...

Partitionnement d'un device
---------------------------

Les devices peuvent être partitionnés comme des disques classiques,
par exemple:

# fdisk /dev/dewb

Une fois partitionné, les fichiers associés dans /dev sont créés par ex
* /dev/dewba1
* /dev/dewba2
Et ainsi de suite ...

Interface sysfs
---------------

Pour chaque device, une entrée est créée dans /sys/block
* /sys/block/dewba pour le device dewba
* /sys/block/dewbb pour le device dewbb
Et ainsi de suite


Traces de debug
---------------

Il est possible d'activer/désactiver les traces de debug avec la commande suivante:

Activer:
# echo 1 > /sys/dewb?/dewb_debug
Désactiver:
# echo 0 > /sys/dewb?/dewb_debug

Lire les informations relatives au device
-----------------------------------------

L'URL CDMI associée:
# cat /sys/dewb?/dewb_urls
La taille du disque:
# cat /sys/dewb?/dewb_size

Reste à faire:

* Tolérance aux pannes quand plus de serveur (reset ou timeout).
* Optimiser la taille des secteurs.
* Mettre le device en non rotational
* Support de DKMS
* Rollback si pas de connexions 